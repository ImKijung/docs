---
id: stat
title: 통계 데이터 조회
description: 데이터베이스별 통계 데이터를 제공합니다.
tags: [ MySQL RDS, 데이터베이스, 통계 ]
---

데이터베이스 서버를 이용하다보면 서버의 용량을 많이 사용하는 DB에 사용량과 여유량을 확인해야 합니다. 정기적으로 데이터를 백업하고 여유 공간을 확보해주지 않으면 서비스가 중단될 수 있습니다. 제공하는 다음 기능을 통해 데이터베이스의 사용량을 주기적으로 확인하고 관리하세요.

## SQL 통계

홈 화면 > 프로젝트 선택 > ***통계/보고서*** > ***SQL 통계***

데이터베이스별 통계 데이터를 제공합니다. 제공하는 기능은 다음과 같습니다.

* SQL별 시계열 차트를 통해 발생 시간 및 성능을 확인할 수 있습니다. 
* 여러개의 인스턴스의 통계 합산을 조회할 수 있습니다.
* 사용 구분별로 데이터를 분류하여 조회할 수 있습니다.

:::note

5초마다 수집한 세션 정보와 당시 수행 중인 SQL Text를 기반하여 제공하는 통계 페이지로 수집 방식에 따른 오차가 있을 수 있습니다.

:::

자세한 내용은 다음 동영상을 참조하세요.

{@youtube: lt_R3SeTbOc}

### 기본 사용 안내

![SQL 통계](/img/db-database-sql-stat.png)

1. ***인스턴스*** 목록에서 조회할 대상을 선택하세요. 중복 선택할 수 있으며, 모든 인스턴스를 선택하려면 ***전체***를 선택하세요.

1. ***시작일***, ***시작 시간***, ***기간***에서 조회 날짜와 시간, 기간을 설정하세요.

1. ![검색 아이콘](/img/ico-btn-search.png) 버튼을 선택하세요.

상위 50건까지의 내용을 테이블에 표시합니다.

:::note

* 조회 기간은 시작일로부터 최대 3달까지 선택할 수 있습니다.
* SQL의 파라미터 값을 ***필터*** 텍스트 상자에 입력해 원하는 내용을 필터링할 수 있습니다.
* 기본 정렬 순서는 ***execute count***입니다. 정렬 순서를 변경하려면 ***정렬 순서*** 목록에서 원하는 기준을 선택하세요.
* 조회한 내용을 csv 형식의 파일로 다운받으려면 ***CSV*** 버튼을 선택하세요.

:::

### 쿼리별 수행 추이 확인하기

테이블 각 항목별 가장 왼쪽에 ![숫자 1](/img/number-01.png) ► 버튼을 선택하세요. 해당 쿼리문의 5분당 실행 횟수와 평균 수행 시간을 확인할 수 있는 차트가 나옵니다. 각 막대 그래프에 마우스를 오버하면 해당 시간의 수치를 확인할 수 있습니다.

사용 구분별로 데이터를 분류해 조회하려면 ![숫자 2](/img/number-02.png)에서 원하는 탭을 선택하세요.

### 쿼리 자세히 보기

![숫자 3](/img/number-03.png) 쿼리문을 선택하세요. 쿼리문과 SQL Plan을 자세히 확인할 수 있는 ***SQL 보기*** 창이 나타납니다.

![쿼리 자세히 보기](/img/db-stat-query.png)


## 테이블 사이즈 증감

홈 화면 > 프로젝트 선택 > ***통계/보고서*** > ***테이블 사이즈 증감***

![테이블 사이즈 증감](/img/db-database-tablesize.png)

테이블 및 인덱스의 사용량을 일별 수집해 기간에 따른 전체 및 테이블별 사용량 증감 정보를 제공합니다. 수집 기준은 에이전트 설정 파라미터의 `table_min_row`(기본값 1000건 이상), `tables_hour`(기본값 새벽 5시) 값을 따릅니다. 수집 기준을 변경하려면 ***관리*** > ***에이전트 설정*** 메뉴로 이동하세요.

1. ***기준 날짜***를 설정하세요. 오늘 날짜가 기본 설정됩니다.

1. 데이터를 비교할 ***비교 날짜***를 설정하세요.

1. ***인스턴스*** 목록에서 데이터베이스 설정값을 조회할 인스턴스를 선택하세요.

1. ![검색 아이콘](/img/ico-btn-search.png) 버튼을 선택하세요.

***테이블 증감 요약*** 섹션에서는 ***건 수***, ***데이터***, ***인덱스*** 별 증감률과 ***전체*** 증감률을 확인할 수 있습니다. ***테이블별 용량 상세*** 섹션에서는 ***테이블 이름***별로 상세 증감률을 확인할 수 있습니다. 

:::note

* ***에이전트 설정*** 메뉴에 대한 자세한 내용은 [다음 문서](agent-settings#agent-options)를 참조하세요.
* 수집하려는 테이블에 대한 조회 권한이 필요합니다. 다음 명령어를 실행해 권한을 확보하세요.

  ```sql

  grant select on [DB_NAME].[TABLE_NAME] to whatap;
  /* 또는 */
  grant select on *.* to whatap;

  ```

* 조회한 내용을 csv 형식의 파일로 다운받으려면 ***CSV 다운로드*** 버튼을 선택하세요.

:::

## 데이터베이스 사이즈

홈 화면 > 프로젝트 선택 > ***통계/보고서*** > ***데이터베이스 사이즈***

데이터베이스별 테이블의 사이즈를 집계하여 추이 정보를 차트로 제공합니다. 수집 주기는 3시간에 한번씩 수집합니다. 

1. ***시간***에서 조회하고 싶은 시간을 설정하세요.

1. ***인스턴스***에서 조회하려는 인스턴스 이름을 선택하세요.

1. ![검색 아이콘](/img/ico-btn-search.png) 버튼을 선택하세요.

:::note

조회 시간은 최대 3주까지 선택할 수 있습니다. 임의의 날짜와 시간을 조회하려면 시계 표시 부분을 선택하세요. 날짜와 시간 텍스트 영역을 클릭하면 날짜와 시간을 선택할 수 있는 옵션이 나타납니다.

:::


<!-- mysql, mariadb 지원 -->
{@include: ../common-items/_db-database-size.mdx}

<!-- oracle, tibero -->
{@include: ../common-items/_db-tablespace-size.mdx}

<!-- oracle, tibero -->
<!-- {@include: ../common-items/_db-sga-size.mdx} -->