---
id: analysis-function
title: 분석
description: 데이터베이스의 성능을 분석하고 문제점을 도출해 장애를 대비하세요.
tags: [ MySQL RDS, 데이터베이스, 분석, 락 트리, 데이터베이스 파라미터 ]
---

수집한 정보를 바탕으로 특정 하루 동안의 전체적인 추이를 분석할 수 있는 기능을 제공하고 있습니다. 서로 다른 일자에 대한 추이 데이터를 비교해 데이터베이스의 성능 추이를 비교합니다. 특정 시점에 진행 중이던 세션을 파악해 느렸던 쿼리(Query)를 분석할 수 있습니다.

또한 하루 동안 발생한 Lock의 추이를 분석할 수 있습니다. Lock을 발생시킨 세션(Lock Holder)과 Lock을 대기하고 있는 세션(Lock Waitier)에 대해 트리 구조로 확인할 수 있습니다. 이러한 기능을 통해 특정 시점 발생한 락 정보 Holder와 Waiter 관계를 확인해 쿼리(Query)를 분석할 수 있습니다.

## 락 트리

홈 화면 > 프로젝트 선택 > ***분석*** > ***락 트리***

하루 동안의 락 발생 여부와 시간을 시계열 차트/락 트리로 제공합니다. 락이 최초 발생한 지점부터 holder와 waiter의 구조를 트리 형태로 표현하여 제공합니다. 락 트리를 시간의 흐름으로 확인할 수 있습니다.

락 트리 분석에 대한 자세한 설명은 다음 동영상을 참조하세요.

{@youtube: USSKyBbcQ98}

### 기본 사용 안내

![락 트리](/img/db-locktress-basic.png)

원하는 ![숫자 1](/img/number-01.png) 날짜와 시간을 설정한 다음 ![숫자 2](/img/number-02.png) 목록에서 인스턴스를 선택하세요. 설정한 시간에 락이 발생했다면 ***lock wait sessions***와 화면 아래 테이블에 조회한 데이터를 표시합니다.

* 그래프 차트에서 특정 시간을 클릭하면 화면 아래 테이블에서 선택한 시간의 락 정보를 확인할 수 있습니다. 화면 가장 아래 버튼을 선택해 선택한 시간을 기준하여 5초 단위로 발생한 구간을 조회할 수 있습니다.
* 그래프 차트에서 특정 시간 영역을 드래그하면 선택한 영역을 확대해 락 정보를 확인할 수 있습니다. 같은 방식으로 특정 시간을 클릭하면 화면 아래 테이블에서 선택한 시간의 락 정보를 조회할 수 있습니다.

### 컬럼 정보

다음은 화면 아래 테이블의 컬럼에 대한 설명입니다.

| 항목 | 설명 |
| -- | -- |
| id | connection 식별자 |
| user | SQL 수행 계정 |
| db | default database명, 없다면 NULL |
| host | 이 스레드가 연결된 hostname |
| command | 수행 중인 명령어 type(Query/Sleep/Daemon 등) |
| time | 현재 COMMAND의 수행 시간(초) |
| state | 스레드의 현재상태 (executing/updating/sending data 등) |
| query | 실행되고 있는 statement. `Processlist.info`에서 리터럴 값을 분리한 SQL을 보여줍니다. |
| query_param | query에서 분리한 리터럴 값 |
| holder type | holder 세션의 type |
| lock mode | holder_mode |
| waiter type | waiter 세션의 type |
| lock request | waiter_mode |
| table | holder_table/waiter_table |
| index | holder_index/waiter_index |

## 데드락

홈 화면 > 프로젝트 선택 > ***분석*** > ***데드락***

![데드락](/img/db-deadlock-basic.png)

데이터베이스에서 발생한 데드락에 대한 정보를 확인할 수 있습니다.

1. ***시간***에서 조회하고 싶은 시간을 설정하세요.

1. ***인스턴스***에서 조회하려는 인스턴스 이름을 선택하세요.

1. ![검색 아이콘](/img/ico-btn-search.png) 버튼을 선택하세요.

조회한 데드락 정보를 테이블 형태로 제공합니다.

:::note

조회 시간은 최대 3주까지 선택할 수 있습니다. 임의의 날짜와 시간을 조회하려면 시계 표시 부분을 선택하세요. 날짜와 시간 텍스트 영역을 클릭하면 날짜와 시간을 선택할 수 있는 옵션이 나타납니다.

:::

## 데이터베이스 파라미터

홈 화면 > 프로젝트 선택 > ***분석*** > ***데이터베이스 파라미터***

현재 데이터베이스 설정값 조회 기능을 제공합니다. 현재 시간의 데이터베이스 설정값을 기본 제공하며 과거 시간의 설정값도 조회할 수 있습니다. 비교 기능을 통해 달라진 점을 확인할 수 있습니다. 장애가 발생할 경우 이전 대비 달라진 설정이 있는지 확인하는데 용이합니다.

***데이터베이스 파라미터*** 메뉴에 대한 자세한 내용은 다음 동영상을 참조하세요.

{@youtube: Gy_NGAi18tI}

### 기본 사용 안내

![데이터베이스 파라미터](/img/db-database-parameter-basic.png)

1. ***기준 날짜***를 설정하세요. 오늘 날짜가 기본 설정됩니다.

1. 데이터를 비교할 ***비교 날짜***를 설정하세요.

1. ***인스턴스*** 목록에서 데이터베이스 설정값을 조회할 인스턴스를 선택하세요.

1. ![검색 아이콘](/img/ico-btn-search.png) 버튼을 선택하세요.

기준 날짜와 비교 날짜의 설정값을 나란히 비교해 볼 수 있습니다. 설정값이 다른 항목은 <span class='vslow'>빨간색</span>으로 표시합니다. 변경된 사항만 확인하고 싶다면 ***변경사항 보기*** 버튼을 선택하세요.

