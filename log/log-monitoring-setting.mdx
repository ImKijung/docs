---
id: log-setting
title: 설정하기
description: 로그 모니터링 설정 방법을 안내합니다. 
tags: [ 로그 모니터링, 설정하기 ]
---

***프로젝트 메뉴*** > ***로그*** > ***설정***

와탭 모니터링 서비스 초기 화면에서 프로젝트를 선택한 다음 프로젝트 메뉴 하위에 ***로그*** > ***설정*** 메뉴를 선택하세요. 

***설정*** 메뉴에서 로그 모니터링 관련 설정을 할 수 있습니다. 에이전트 설정 확인, 로그 모니터링의 활성화 여부 결정, 로그 데이터의 유지 기간 및 조회 비밀번호 설정, 로그 파서 등록, 빠른 인덱스 설정 등의 메뉴를 사용할 수 있습니다.

:::note 권한
프로젝트에 대한 **수정 권한**이 있는 경우에만 로그 모니터링 설정을 수정할 수 있습니다.
:::

![](/img/log-setting.png) 

## ![](/img/number-01.png) 안내와 요금제 확인

![number-s](/img/number-01.png) 영역의 ***로그 모니터링 가이드*** 보기 버튼과 ***요금제 보기*** 버튼을 클릭하면 관련 안내 화면으로 이동합니다. 

## ![](/img/number-02.png) 로그 모니터링 시작하기

### 에이전트 설정 확인
로그 모니터링을 시작하기 위해 에이전트 버전과 설정 정보를 확인하세요. ![number-s](/img/number-02.png) 영역의 ***에이전트 설정 확인*** 메뉴를 클릭하여 안내대로 과정을 진행하세요.

* **애플리케이션 모니터링**  
     ***적용하기*** 메뉴 하위에 애플리케이션별 적용 안내를 확인하세요. 다음 설명서 [Java](log-java), [PHP](log-php), [Python](log-python), [Golang](log-go) 등을 참조하세요.

* **서버 모니터링**  
    ***적용하기*** 메뉴 하위에 개별 적용 안내를 확인하세요. [다음 설명서](log-server)를 참조하세요. 안내대로 *whatap.conf* 에 로그 감시 대상 파일 설정을 추가하세요.

### 로그 모니터링 활성화

![number-s](/img/number-02.png) 영역의 ***로그 모니터링 활성화*** 메뉴를 클릭하여 로그 모니터링 활성화 및 비활성화 여부를 설정하세요.

{@include: _log-java-start.mdx}

## ![](/img/number-03.png) 로그 모니터링 설정

![number-s](/img/number-03.png) 상단에서 ***로그 사용량***을 확인할 수 있습니다. 또한 ***데이터 유지 기간*** 및 ***로그 조회 비밀번호*** 설정을 변경할 수 있습니다.

### 데이터 유지 기간
로그 데이터 유지 기간을 지정할 수 있습니다. 기간 지정에 따라 오래된 데이터를 삭제해 공간을 확보할 수 있습니다.
* **트라이얼 프로젝트**  
    데이터 유지 기간으로 1일, 2일, 3일을 선택할 수 있습니다.
* **유료 프로젝트**  
    데이터 유지 기간으로 1일, 2일, 3일, 4일, 5일, 6일, 7일, 10일, 30일, 40일을 선택할 수 있습니다.
* **저장량 기준 과금**   
    데이터 유지 기간에 따라 비용이 달라집니다.
:::note 예시
일 평균 200만 로그 라인이 쌓이고 데이터 유지기간을 3일로 지정한 경우, 평균 600만 로그 라인이 수집 서버에 유지되고 과금 대상이 됩니다.
:::

### 로그 조회 비밀번호
보안을 강화하기 위해 ***로그 조회 비밀번호***를 설정하세요. 로그 조회 비밀번호 지정은 선택 사항입니다.

로그 조회 비밀번호를 사용 중이라면 로그 화면 진입 시 반드시 비밀번호를 입력해야 합니다.
:::note 비밀번호 분실시
**프로젝트 관리자**가 ***설정***에서 새 비밀번호로 수정해야 합니다.
:::

## ![](/img/number-04.png) 로그 Parser 설정
수집된 로그를 검색할 수 있는 키를 만들기 위해 **파싱**(Parsing) **로직을 등록**할 수 있습니다. 파싱 로직을 등록하지 않은 경우 다음의 key들로만 검색이 가능합니다.
:::note 파싱 로직 미등록 시 검색 가능한 key
`category`, `oid`, `oname`, `okind`, `okineName`, `@txid`, `@login`, `httphost` 
:::

### 파서 등록 순서
![sc](/img/log-setting-parser.png)
1. ![number-s](/img/number-04.png) 영역 하단의 ***+ 추가하기***를 클릭하세요.

1. ![number-s](/img/number-04.png) 영역 ***파서 선택창***에서 파서를 선택하세요.

1. ![number-s](/img/ic-number-07.svg) 영역 ***카테고리 선택창***에서 카테고리를 선택하거나 직접 입력하세요. 

1. ![number-s](/img/ic-number-07.svg) 영역 ![아이콘](/img/ico-filter.svg)***필터*** 버튼을 클릭하여 필터를 추가할 수 있습니다. 필터 입력 시 필터 조건에 맞는 로그 데이터에만 패턴을 적용합니다.
:::note
필터를 추가하는 것은 선택 사항입니다.
:::

1. 등록하려는 패턴이 정상적인지 ![number-s](/img/ic-number-08.svg) 영역 ***시뮬레이션*** 버튼을 클릭해 시뮬레이션 및 패턴의 퍼포먼스를 측정하세요.

1. 시뮬레이션 결과가 정상적이라면 ![number-s](/img/ic-number-08.svg) 영역 ***저장*** 버튼을 눌러서 저장하세요.

:::note
* ![number-s](/img/ic-number-09.svg) 버튼을 클릭하여 파서 설정을 드래그해 순서를 변경할 수 있습니다.
* ![number-s](/img/ic-number-08.svg) 영역 ***리셋*** 버튼을 클릭하면 작성 중 내용이 초기화됩니다.
:::

### 설정 항목

|설정 값|설명|기타|
|----|----|----|
|카테고리|패턴을 적용할 카테고리입니다.|required|
|필터|필터로 적용할 search key, search value를 입력합니다. 필터 조건에 맞는 로그 데이터에만 패턴을 적용합니다.|optional|
|패턴|로그를 파싱(parsing)할 패턴입니다. 작성한 패턴에 맞추어서 파싱을 하고, 인덱스를 생성합니다. Grok, Custom 문법을 지원합니다.|required|
|활성|활성/비활성 여부입니다.|기본값은 true|

### 패턴 등록

![](https://img.whatap.io/media/images/log_100_parsers_1101.png)
**Grok**과 **JSON 포맷 파서** 2가지 유형의 파서를 제공합니다. ![number-s](/img/number-04.png) 영역 파서 선택창에서 확인할 수 있습니다.

1. **Grok 패턴 파서 등록**
* 문법: `%{SYNTAX:SEMANTIC}`
    * **SYNTAX**  
        Grok 정의 패턴입니다.
    * **SEMANTIC**  
        파싱된 데이터에 할당할 키입니다.

    :::info 권장사항
    SEMANTIC에는 예약어 등이 사용되지 않도록 조합어 사용을 권장합니다.
    :::

2. **JSON 포맷 파서 패턴 등록**  
    로그 전체 혹은 일부가 JSON 형태로 출력되는 경우 JSON 포맷 파서를 통해 JSON으로 출력된 부분을 파싱할 수 있습니다.

    |옵션|설명|
    |----|----|
    |prefix|JSON 문자열의 시작 부분 앞의 문자열을 지정합니다. 미지정 시 로그 출력문의 맨 앞부터 JSON 문자열로 식별합니다.|
    |postfix|JSON 문자열의 종료 부분 뒤의 문자열을 지정합니다. 미지정 시, 로그 출력문의 맨 뒤 까지를 JSON 문자열로 식별합니다.|
    |ignore|JSON 출력부 중 키 추출을 제외할 필드를 지정합니다.|

### 파서 시뮬레이션

### 퍼포먼스 측정

### 파싱 성공

## ![](/img/number-05.png) 빠른 인덱스 설정