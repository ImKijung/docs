---
id: set-agent
title: 설정하기
description: 컨테이너 내 애플리케이션의 모니터링을 위해 필요 설정을 whatap.conf 파일에 작성합니다. 설정할 수 있는 옵션에 대해 알아봅니다.
tags: [ 쿠베네티스, 쿠베네티스 모니터링, 애플리케이션, Java, Python, Node.js, whatap.conf ]
---

:::note 

**컨테이너 내 애플리케이션 에이전트 옵션 설정**

컨테이너 내 Java, Python, Node.js 등 애플리케이션의 모니터링을 위해 필요 설정을 *whatap.conf* 파일에 작성합니다. *whatap.conf* 파일을 통해 설정할 수 있는 옵션에 대한 자세한 내용은 다음 링크를 참조하세요.

* [Java - whatap.conf 설정하기](../java/set-agent)

* [Node.js - whatap.conf 설정하기](../nodejs/set-agent)

* [Python - whatap.conf 설정하기](../python/set-agent)

:::

## 쿠버네티스 에이전트 옵션 설정

* 와탭 쿠버네티스 에이전트 배포 시 컨테이너 `env` 필드를 통해 설정할 수 있습니다. 

* 컨테이너 내부 *whatap.conf* 파일을 수정해 설정할 수 있습니다. 

* *whatap.conf* 파일 내 옵션이 컨테이너 `env` 필드에 설정된 옵션보다 높은 우선순위를 가집니다. 

* *whatap.conf* 또는 컨테이너 `env`에 설정된 값이 없는 경우 기본값이 사용됩니다.


### 컨테이너별 옵션 설정

#### whatap-node-helper 

|옵션명	|기본값	|타입	|설명	|비고|
|---|---|---|---|---|
|`collect_volume_detail_enabled`|	`true`|	bool|	노드 에이전트에서 모든 컨테이너에 대한 exec df 명령어를 이용해 컨테이너 볼륨 정보 조회를 활성화합니다.|노드에 실행 중인 모든 컨테이너의 스토리지 사용량 및 볼륨 정보를 수집하는 기능을 활성화 합니다.|
|`inject_container_id_to_apm_agent_enabled`|	`true`|	bool|	와탭APM 컨테이너에 exec를 이용한 container ID 주입을 활성화 합니다.|와탭 APM 으로 식별되는 컨테이너의 ID를 자동으로 추출하고, 이를 APM 도구에 주입하여 성능 모니터링 데이터와 컨테이너를 연결하는 데 사용될 수 있습니다.|
|`debug`|	`false`|	bool|	디버그 모드 활성화 여부|	디버그 모드 활성화 시 로그 레벨을 "DEBUG"로, 그렇지 않을 경우 "INFO"로 설정.|
|`kube_config_path`|`~/.kube/config`|	string|	Kubernetes 설정 파일 경로|미설정 시*~/.kube/config* 를 사용합니다.|
|`log_sys_out`|	`true`|	bool|	로그 시스템 출력 설정|	`true`로 설정 시 표준 출력(stdOut)과 파일에 동시에 로깅을 남깁니다. 변경 시 로깅 시스템에 즉시 반영됩니다.|

#### whatap-node-helper 

|옵션명	|기본값	|타입	|설명	|비고|
|---|---|---|---|---|
|`shutdown`|	`false`|	boolean|	수집 서버와 연결을 강제로 중단 (통신 중지)|-|	
|`license`|	-	|string|	프로젝트에 발급된 라이센스를 사용해 에이전트 식별	|-|
|`whatap.server.host`|	13.124.11.223/13.209.172.35|	string|	수집 서버의 IP|	delimiter “/:”|
|`whatap.server.port`|	`6600`|	number|	수집 서버의 데이터 수신 Port	|-|
|`ONODE_NAME`|	`NODE_NAME` or `NODE_IP` 환경 변수값|	string|	에이전트 노드 식별을 위한 이름|	환경변수 `NODE_NAME` 또는 `NODE_IP` 사용|
|`tcp_connection_timeout`|	`3000`|	number|	whatap-master-agent 와 수집 서버 소켓 연결 시 타임아웃 시간	|-|
|`tcp_so_timeout`|	`60000`|	number	|소켓 연결 후 데이터 송수신 타임아웃 시간	|-|
|`debug`|	`false`|	boolean|	디버그 모드 활성화 여부	|-|

<!-- >
gpuEnabled	false	boolean	GPU 모니터링이 활성화 여부입니다.	
count_interval	5000	number	매트릭스(kube_pod, container) 를 수집서버에 전송 하는 주기 입니다. 	 단위 : ms

해당 옵션은 화면상 데이터 갱신 주기에 영향을 줄 수 있습니다. 자세한 설명은 아래 매트릭스별 영향을 받는 화면 구성요소 를 참고 
collect_interval	5000	number	에이전트가 apiserver 에 요청하여 매트릭스(kube_pod, container) 를 수집하는 주기 입니다.	단위: ms

해당 옵션은 화면상 데이터 갱신 주기에 영향을 줄 수 있습니다. 자세한 설명은 아래 매트릭스별 영향을 받는 화면 구성요소 를 참고
collect_apiserver_metric_by_leader	false	boolean	해당 옵션이 활성화 된 경우 노드 에이전트는 메트릭 수집을 마스터 에이전트에 위임합니다. 	whatap-master-agent 의 collect_apiserver_metric_by_leader가 활성화 필요하며, 기존 whatap-node-agent 에 의한 apiserver 부하를 낮추는 효과를 기대할 수 있습니다.
-->

<!-- >
:::note 

*whatap.conf* 파일은 사용자 쿠버네티스 환경의 ConfigMap 기능을 통해 관리할 수 있습니다.

:::
-->