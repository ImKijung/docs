---
id: server-warning-notice
title: 서버 경고 알림
description: 서버 이벤트 조건 설정을 통해 경고 알림을 보냅니다.
tags: [ 경고 알림, 서버, UI ]
---

홈 화면 > 프로젝트 선택 > ***경고 알림*** > ***이벤트 설정*** 
<!--
> ***서버*** 탭 선택
<span class='vslow'>위험</span>, <span class='slow'>경고</span> 수준으로 나누어 알림을 보낼 수 있습니다.
-->

서버 및 프로세스 이벤트 정책을 생성, 수정, 삭제할 수 있습니다. 이벤트 타입을 선택하여 서버의 다시 시작 여부, 에이전트의 통신 장애 지속시간, 자원 사용량에 따라 이벤트를 설정할 수 있습니다.

![이벤트 설정 - 서버](/img/server-warning.png)

* ![지시선 1](/img/number-01.png) ***+ 이벤트 추가***  
    해당 이벤트를 추가할 수 있습니다.
* ![지시선 2](/img/number-02.png) ***이름***  
    해당 이벤트의 이름을 표시합니다
* ![지시선 3](/img/number-03.png) ***조건***  
    지정된 이벤트를 간략하게 보여줍니다.
* ![지시선 4](/img/number-04.png) ***서버***  
    해당 이벤트를 사용하는 서버의 수를 표시합니다.    
* ![지시선 5](/img/number-05.png) ***수정***과 ***복사***  
    * ![수정 아이콘](/img/ico-edit.svg) 버튼을 선택해 저장된 이벤트 설정을 수정할 수 있습니다. 
    * ![복제 아이콘](/img/ico-copy.svg) 버튼을 선택해 다른 인프라에 해당 이벤트를 복사할 수 있습니다.    

## 서버 이벤트

특정 서버에 대한 전반적인 이벤트를 설정할 수 있습니다. 

![이벤트 추가 - 서버](https://img.whatap.io/media/images/server_event_setting_editor.png)

* ***미수신***  
    통신 장애 이벤트입니다.
* ***포트 접속 불가 이벤트***  
    해당 이벤트의 이름을 표시합니다.
* ***CPU Memory Swap***  
    CPU, Memory, SWAP 메모리 등의 사용률에 대한 이벤트를 설정합니다.
* ***Disk***  
    디스크 사용량과 I/O 사용량 및 Inode 사용량을 기반으로 이벤트를 설정합니다.
* ***Network***  
    네트워크 사용량과 관련한 이벤트를 설정합니다. 트래픽 양과 초당 패킷을 기준으로 설정할 수 있습니다.
* ***지속 시간***  
    해당 시간 이후 서버의 상태가 <span class='slow'>Warning</span>, <span class='vslow'>Fatal</span>로 변경됩니다.

:::caution
하나의 서버에 하나의 이벤트를 할당할 수 있습니다.
:::

## 프로세스 이벤트 
해당 알림을 비활성화 하거나 알림 조건을 재설정 후 알림 해소 조건에 맞는 데이터가 들어오면 잘못 발생한 진행 중 알림을 해소시킬 수 있습니다.
특정 프로세스에 대한 이벤트 정책을 설정할 수 있습니다.

![이벤트 추가 - 프로세스](https://img.whatap.io/media/images/process_event_setting_editor.png)

* ***프로세스명***  
    선택한 프로세스명이 표기됩니다.
* ***Enable as Project-Wide***  
    해당 프로젝트에 있는 모든 서버들에 해당 이벤트를 적용합니다.
* ***Count***  
    해당 프로세스의 개수 증감에 대하여 이벤트를 설정할 수 있습니다. 좌측의 경우 최저치, 우측의 경우 최대치 알림입니다. 프로세스가 슬라이더 좌측보다 적거나 많다면 이벤트가 발생합니다.
* ***CPU***  
    CPU 사용량에 따라 이벤트를 설정할 수 있습니다.
* ***Memory***  
    메모리 사용량에 따라 이벤트를 설정할 수 있습니다.
* ***이벤트 적용***  
    해당 프로세스에 대한 이벤트를 단일 서버가 아닌 다중 서버에 대한 정책으로 설정할 수 있습니다.
* ***임곗값 지속 시간***     
    해당 설정된 임곗값의 지속시간 이후 서버 상태가 <span class='slow'>Warning</span>, <span class='vslow'>Fatal</span>로 변경됩니다.

:::info
* 프로세스 알림 ***조건***을 잘못 설정한 경우 해당 알림을 비활성화하거나 알림 ***조건***을 재설정하세요.
* ***프로세스*** 및 ***프로세스 소유자***를 잘못 지정한 경우 해당 알림을 비활성화해 진행 중인 알림을 해소한 후 알림 ***조건***을 재설정하세요.
:::

## 프로세스 그룹 이벤트 

:::note
프로세스 그룹 추가 방법에 대한 자세한 내용은 [다음 문서](../analysis/server-detail.mdx)를 참조하세요.
:::

프로세스 그룹의 자원 사용량 합계치가 특정 기준을 넘으면 이벤트를 받도록 지정할 수 있습니다. 프로세스 그룹을 추가하고 다음 절차를 따라 진행하세요.

### 프로세스 그룹 이벤트 추가

1. ***경고 알림*** > ***이벤트 설정***에서 ***+ 이벤트 추가***를 선택하세요.
1. 제목을 입력하세요.
1. 이벤트 타입을 ***프로세스***로 선택하세요.
1. ***선택된 에이전트가 없습니다*** 버튼을 선택하면 서버 목록을 조회할 수 있습니다. 
1. 해당 이벤트를 이용할 서버를 선택한 후 ***적용*** 버튼을 누르세요.
:::caution
선택한 서버가 다른 이벤트 정책을 따르고 있는 경우 현재 설정으로 이벤트 정책이 변경됩니다.
:::
1. 프로세스 목록에서 등록한 프로세스 그룹을 선택하세요.
1. 프로세스 소유자를 선택 후 ***저장*** 버튼을 선택하세요.  
    * 생략하면 소유자와 관계없이 같은 이름의 모든 프로세스에 설정이 적용됩니다.  
    * 이벤트 조건은 소유자를 생략한 경우라도 소유자-프로세스 단위로 동작합니다.

이 과정을 마치면 다음과 같이 프로세스 밑에 새로 생성한 프로세스 그룹 이벤트를 확인할 수 있습니다. 

![프로세스 그룹 이벤트](https://img.whatap.io/media/images/process_group_alarm_result.jpg)

:::note
프로세스 그룹 이벤트는 프로세스 그룹명이 아닌 이벤트 제목으로 뜹니다. 
:::

### 프로세스 그룹 이벤트 삭제 

오른쪽의 ![수정 아이콘](/img/ico-edit.svg)***수정*** 버튼을 선택하고, 수정 화면에서 ![삭제 아이콘](/img/ic-delete-critical.svg)***삭제*** 버튼을 선택하세요.

## 로그 파일

애플리케이션에서 발생하는 여러 로그들의 감시 설정을 편리하게 관리할 수 있습니다.

![이벤트 추가 - 로그 파일](https://img.whatap.io/media/images/logfile_event_setting_editor.png)

1. 해당 정책의 이름을 지정하세요.
1. 새로운 규칙을 생성하세요.
1. 지정된 규칙을 삭제하세요.
1. 삭제하거나 적용될 규칙을 선택하세요.
1. 적용될 서버를 선택하세요.
1. 특정 로그가 발생할 때 서버상에서 자동 실행되는 스크립트를 지정할 수 있습니다.  
    ![이벤트 추가 - 로그 파일 - 자동 스크립트](https://img.whatap.io/media/user_guide_server/alert/alert_autoscript.png)

### 파일 로그 

파일 로그를 감시하기 위해 파일 경로, 키워드를 입력할 수 있습니다.

![이벤트 설정 - 파일 로그](https://img.whatap.io/media/user_guide_server/alert/file_log_set.png)

* ***파일 경로***  
    감시할 파일의 경로입니다.
* ***키워드***  
    해당 파일의 로그에서 해당 키워드가 발생하면 이벤트를 발생시킵니다.
* ***위험도***  
    이벤트가 발생하였을 때 위험도를 지정합니다.

#### 파일 로그 처리량

파일 로그 처리량은 로그 라인 기준으로 다음과 같이 설정되어 있습니다. 로그 과다 발생 시 와탭 서버 모니터링 에이전트 CPU 과다 사용 방지를 위해서입니다.
* 버전 1.3.6 이하 : 약 2초당 60 라인 초과량은 미처리
* 버전 1.3.7 이상 : 약 2초당 1000 라인 초과량은 미처리

2초당 초과량의 조절은 다음 옵션으로 조절할 수 있습니다.

* **Linux**  
    > */usr/whatap/infra/conf/whatap.conf* 파일에 `log.skip.threshold=2초당 처리 가능 라인 수`
* **Windows**  
    > *C:\Program Files\WhatapInfra\whatap.conf* 파일에 `log.skip.threshold=2초당 처리 가능 라인 수`

### 로그 싱크 이벤트 

로그명과 수준을 선택하고, 알림 소스, 알림 ID, 키워드를 입력할 수 있습니다.

![로그 싱크 이벤트](https://img.whatap.io/media/images/logsink_event_setting_editor.png)

입력창에 다음 예시에서 해당하는 값을 선택해 추가하면 됩니다.

* **로그명**
    ![로그명](https://img.whatap.io/media/user_guide_server/noti/1530.png)
* **수준**, **이벤트 소스**, **이벤트 ID**, **키워드**
    ![로그명](https://img.whatap.io/media/user_guide_server/noti/1540.png)  

* **위험도**  
    이벤트가 발생했을 때 해당 이벤트의 위험도를 지정할 수 있습니다.

:::note
이벤트 로그는 Windows 환경에서만 사용 가능합니다.
:::