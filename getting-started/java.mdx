---
id: java
title: Java
description: JVM 환경에서 동작하는 모든 애플리케이션에 적용할 수 있는 에이전트 설치 방법입니다.
tags:
    - Java
---

에이전트를 설치하고 적용하기 전에 [지원 환경](supported-spec#java)을 먼저 확인한 다음 아래의 과정대로 진행하세요.

import Paccesskey from '../getting-started/_accesskey.mdx';
import Download from '../getting-started/_download-agent.mdx';
import WhatapConf from '../getting-started/_whatap_conf.mdx';
import JvmOpt from '../getting-started/_add-jvmopt.mdx'

## 프로젝트 액세스 키 확인
<Paccesskey/>

## 에이전트 다운로드
<Download/>

## *whatap.conf* 설정하기
<WhatapConf/>

## JVM 옵션 추가
<JvmOpt/>

### Topcat

#### **Linux**  
*catalina.sh* 파일 상단에 ```JAVA_OPTS```을 추가하세요.

```text title='{Tomcat 설치 경로}/bin/catalina.sh' {2,4} showLineNumbers
########## WHATAP START ############
WHATAP_HOME=/whatap
WHATAP_JAR=`ls ${WHATAP_HOME}/whatap.agent-*.jar | sort | tail -1`
JAVA_OPTS="${JAVA_OPTS} -javaagent:${WHATAP_JAR} "
########## WHATAP END ############
```

#### **Windows**
* **Tomcat** 서비스로 설치한 경우
    1. 프로그램 메뉴에서 **Configure Tomcat** 또는 **톰캣 설치 폴더** */bin* 경로의 *tomcat<톰캣버전>w.exe* 파일을 실행하세요.
    2. ***Java*** 탭을 클릭하세요.
    3. ***Java Options*** 항목에 Whatap 에이전트를 등록하세요.

        ```text
        -javaagent:<와탭설치경로>/whatap.agent-<version>.jar
        ```
    ![Apache Tomcat](https://img.whatap.io/media/images/tomcat-win.png)

* *setup.bat* 파일을 통해 실행하는 경우
    ```text title='{Tomcat 설치 경로}/bin/catalina.bat' {2,5} showLineNumbers
    rem ########## WHATAP START ############
    set WHATAP_HOME=C:\whatap
    for /f %%f in ('dir /b /on "%WHATAP_HOME%\whatap.agent-*.jar"') do set last=%%f
    set WHATAP_JAR=%last%
    set WHATAP_OPTS=-javaagent:%WHATAP_HOME%\%WHATAP_JAR%

    if "x%JAVA_OPTS%"=="x" goto setWhatap

    set JAVA_OPTS_TMP=%JAVA_OPTS:"=%
    if not "x%JAVA_OPTS_TMP:whatap=%"=="x%JAVA_OPTS_TMP%" goto endWhatap

    :setWhatap
    set JAVA_OPTS=%JAVA_OPTS% %WHATAP_OPTS%

    :endWhatap
    rem ########## WHATAP END ############
    ```
