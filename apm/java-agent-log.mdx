---
id: java-agent-log
title: Java 에이전트 로그
description: Java 에이전트 로그의 위치와 옵션을 설정할 수 있습니다.
tags:
    - Java
    - 에이전트 로그
    - 로그
---

애플리케이션 서버가 실행되면 모니터링 정보를 수집합니다. 수집한 정보는 로그 파일에 저장합니다.

## 경로 및 이름 설정

에이전트 로그의 경로와 이름은 *whatap.conf* 파일에 설정할 수 있습니다. `log_root`의 기본값으로 *${WHATAP_HOME}/logs* 경로를 사용합니다.

```ini title='whatap.conf'
log_root=System.getProperty("whatap.home", ".") + "/logs"
log_name=whatap
```

## 로그 관리 옵션

*whatap.conf* 파일에 로그 관련 옵션을 작성해 로그 내용을 관리할 수 있습니다.

```ini title='whatap.conf 예시'
watchlog_enabled=true
log_rotation_enabled=true
log_oname_enabled=true
log_keep_days=7
```

다음은 적용할 수 있는 로그 관련 옵션입니다.

| 옵션 이름      | 기본값         | Type         | 설명          |
| ------------ | :----------: | :----------: | ------------ |
| watchlog_enabled | false | Boolean | 값이 `true`이면 로그 모니터링을 활성화합니다. |
| watchlog_check_interval | 2000 | Int | 로그를 감시하는 주기를 설정할 수 있습니다. 설정한 간격으로 로그 파일에 기록이 추가됐는지 확인합니다. |
| watchlog_read_count | 8 | Int | 로그를 읽어들이는 최대 횟수입니다. 한 번에 `watchlog_buffer_size` 만큼 읽습니다. |
| watchlog_buffer_size | 131072(128k) | Int | 로그를 읽어들이는 최대 횟수입니다. 한 번에 `watchlog_buffer_size` 만큼 읽습니다.
| watchlog.LOGKEY.enabled | false | Boolean | 하나의 로그 파일을 감시하기 위한 설정입니다. `file` 이름을 입력하고 감시한 `word` 여러 개를 쉼표(,)로 구분해 설정합니다. `check_interval` 간격으로 로그를 감시하다가 키워드를 발견하면 경고합니다. 한번 경고가 나가면 `silent` 만큼 경고를 멈춥니다. |
| watchlog.LOGKEY.file | NONE | String | ^ |
| watchlog.LOGKEY.words | NONE | String | ^ |
| watchlog.LOGKEY.slient | 10000 | Int | ^ |
| watchlog.LOGKEY.check_interval | 1000 | Int | ^ |
| log_root | `${WHATAP_HOME}`/logs | String | 에이전트 로그 경로를 설정합니다. |
| log_datasource_lookup_enabled | true | Boolean | InitialContext Lookup 시 DataSource인 경우 로그를 기록하는 기능을 활성화합니다. |
| log_rotation_enabled | true | Boolean | 에이전트 로그 파일을 날짜 별로 저장하는 기능을 활성화합니다. 로그 파일명은 *whatap-`yyyyMMdd`.log* 형태로 저장합니다. 값이 `false`이면 로그 파일명은 *whatap.log* 형태로 저장합니다. |
| log_keep_days | 7 | Int | 로그 파일 보관 기간을 설정합니다. `log_rotation_enabled` 값이 `true`인 경우에만 동작합니다. |
| log_oname_enabled | false | Boolean | 값이 `true`이면 각 로그마다 에이전트 이름을 추가합니다. [예시](/img/java-agent-log-oname.png) |

<!-- InitialContext Lookup 담당자에게 확인 필요 -->