## 엔드포인트 설정

엔드포인트(Endpoint)란 트랜잭션이 시작되는 지점을 의미합니다. HTTP 서블릿의 경우 `HttpServlet.service()` 혹은 `Filter.doFilter()`가 트랜잭션의 시작이고 이곳을 트랜잭션 엔드포인트라고 합니다.

### Back Stack 확보

#### 사용하는 TCP 포트를 알고 있는 경우

소켓 통신 데몬, DB 작업을 수행하는 배치와 같이 트랜잭션에서 사용되는 TCP 포트가 명확한 경우 *whatap.conf* 파일에 `stacklog_socket_port` 옵션을 추가해 Back Stack을 확보할 수 있습니다.

`stacklog_socket_port` 옵션을 추가해 확보한 Back Stack 정보는 와탭 모니터링 서비스 화면에서 ***프로젝트 메뉴*** > ***로그***에서 확인할 수 있습니다.

```ini title='whatap.conf'
# 오라클 1521포트를 사용하는 것이 명확한 DB 배치 데몬인 경우
stacklog_socket_port=1521
```

#### 사용하는 메소드(Method)를 알고 있는 경우

트랜잭션에서 사용되는 메소드(Method)를 대략이나마 알고 있는 경우 메소드 프로파일링 옵션을 사용해 Back Stack을 확보할 수 있습니다. 사용하는 메소드를 알고 있더라도 트랜잭션 엔드포인트보다 먼저 호출되는 경우라면 적절한 포인트를 찾기 어려워집니다. 따라서 트랜잭션 수행 과정 중에 사용되는 메소드를 지정해야 합니다.

```ini title='whatap.conf'
# 메소드 프로파일을 설정하세요.
hook_method_patterns=io.whatap.KnownClass.knownMethod,*.IKnowClassName.*
# 프로파일 대상 메소드가 트랜잭션 시작점이 되도록 지정하세요.
trace_auto_transaction_enabled=true
# 트랜잭션 시작 시 StackTrace를 기록하세요.
trace_auto_transaction_backstack_enabled=true
```

#### 사전 정보가 불명확한 경우

1. 와탭 모니터링 서비스 화면에서 프로젝트를 선택하세요.

1. 왼쪽에 메뉴에서 ***프로젝트 메뉴*** > ***애플리케이션*** > ***인스턴스 성능 분석***을 선택하세요.

1. ***인스턴스 성능 분석*** 화면에서 ***로딩된 클래스***를 선택하세요.  
    화면에 나타난 목록을 바탕으로 사용할만 클래스, 메소드를 유추할 수 있습니다. 이후 메소드 프로파일 설정을 통해 Back Stack을 시도합니다.

