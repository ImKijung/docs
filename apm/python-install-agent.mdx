---
id: python-install-agent
title: Python 에이전트 설치
description: Python 환경의 애플리케이션 서버에 에이전트를 설치하는 방법을 제공합니다.
tags: 
    - Python
    - 설치하기
---

{@include: _agent-signup-guide.mdx}

{@youtube: MWDFeegF6mQ}

Python 모니터링 서비스를 사용하려면 대상 애플리케이션 서버에 모니터링 에이전트를 설치해야 합니다. 설치는 whatap.io 사이트에서 압축된 에이전트 파일을 다운로드해 서버 임의의 위치에 압축을 풀어 실행하는 방식입니다.

{@include: ../getting-started/_create-project.mdx}

{@include: ../getting-started/_accesskey.mdx}

## 에이전트 다운로드

**프로젝트 액세스 키**를 발급받은 다음 ***와탭 에이전트 다운로드*** 섹션으로 이동하세요. 해당하는 명령어를 복사해 에이전트를 설치하세요. 

<details>
<summary>Python 에이전트 구성 파일</summary>

Python 모니터링 서비스를 구성하는 각 파일의 역할은 다음과 같습니다.

* *whatap.conf* : 에이전트 설정 기본 필수 파일입니다. 에이전트와 관련된 옵션은 모두 *whatap.conf*에서 설정 가능합니다.

* *paramkey.txt* : 추적한 트랜잭션의 프로파일 정보로 수집한 HTTP와 SQL 데이터의 파라미터 정보를 확인할 때 사용합니다. 보안 키를 파일에 저장하고 실제 수집된 데이터를 브라우저에서 확인하고자 할 때 파일에 저장해 둔 보안 키를 입력해야 조회할 수 있습니다. 파일의 내용을 직접 변경하여 보안 키 수정이 가능합니다. 관련 옵션은 다음과 같습니다. 

    * `profile_http_parameter_enabled` (default: false)

    * `profile_sql_param_enabled` (default: false)

</details>

## Docker

1. Docker 컨테이너로 서비스되는 애플리케이션의 경우 다음 내용을 *DockerFile*에 추가하세요.

    * Python 에이전트를 설치하세요.

        ```javascript title='Dockerfile'
        ENV WHATAP_HOME /whatap
        RUN mkdir -p /whatap
        RUN pip install whatap-python⓵
        ```
        ⓵ *requirements.txt*를 사용하는 경우 해당 파일에 `whatap-python`을 추가하세요.

    * 프로젝트 액세스 키 및 서버 IP 설정을 등록하세요.

        ```javascript title='Dockerfile'
        RUN touch /whatap/whatap.conf
        RUN echo "license=[ 발급된 라이센스 key ]" > /whatap/whatap.conf
        RUN echo "whatap.server.host=[ 수집서버 IP ]" >> /whatap/whatap.conf
        RUN echo "app_name=[ 애플리케이션 이름 ]" >> /whatap/whatap.conf
        RUN echo "app_process_name=[ 애플리케이션 프로세스 이름 예)uwsgi, gunicorn.. ]" >> /whatap/whatap.conf
        ```
1. 기존 실행 커맨드 `python manage.py runserver`앞에 `whatap-start-agent`를 추가하세요.

    ```javascript title='Dockerfile'
    ENTRYPOINT whatap-start-agent python manage.py runserver
    ```

## 애플리케이션 서버 별 적용 절차

기본은 절차는 다음과 같습니다.

```javascript title='SH'
$ whatap-start-agent python manage.py runserver
```

### uWSGI
