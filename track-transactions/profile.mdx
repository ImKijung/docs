---
id: trs-profile
title: 트랜잭션 프로파일
description: 트랜잭션 프로파일을 안내합니다. 
tags: [ 트랜잭션, UI ]
---

## 트랜잭션 프로파일링이란? 
{@include: _transaction-profile-step.mdx} 

## 상세 분석

와탭은 트랜잭션의 성능을 분석하기 위해 이름과 클라이언트 정보 등의 속성, 트랜잭션의 처리 성능 그리고 각 구간별 상세 수행이력을 수집하고 보여줍니다.

![profile_apm](https://img.whatap.io/media/images/Screenshot_2020-12-15_W_JAVA_DEMO_5490_-_Application_Monitoring13.png)

이 중 상단에 위치한 트랜잭션 속성과 성능 정보에 대한 설명은 다음과 같습니다.

![profile_apm_trs](https://img.whatap.io/media/images/Screenshot_2020-12-15_W_JAVA_DEMO_5490_-_Application_Monitoring14.png)

#### 트랜잭션 속성 및 성능
<!-- 표기 방식 고민 -->
|속성|성능 정보|
|----|----|
|**프로젝트 코드**|와탭 모니터링 프로젝트 코드|
|**Oid**|애플리케이션(에이전트) 오브젝트 아이디|
|**Oname**|애플리케이션 오브젝트 이름|
|**Type**|애플리케이션 타입 - Java, Node.Js, PHP, Python 등|
|**Tid**|트랜잭션 아이디|
|**UrlHash**|URL의 hash 값|
|**UserToken**|사용자 토큰 - 와탭이 부여한 고유한 사용자 아이디|
|**Method**|HTTP 메소드 - GET, POST, PUT, HEAD 등|
|**StartTime**|트랜잭션 시작 시간|
|**EndTime**|트랜잭션 종료 시간|
|**Elapsed**|트랜잭션 수행 시간|
|**CpuTime**|CPU 점유 시간|
|**MemAlloc**|트랜잭션이 사용한 메모리 량|
|**Ipaddr**|클라이언트 IP|
|**Country**|클라이언트 국가 정보|
|**City**|클라이언트 도시 정보|
|**SqlCount**|SQL 수행 건수|
|**SqlTime**|SQL 수행 시간|
|**FetchCount**|SQL에서 데이터를 조회한 레코드 건수|
|**FetchTime**|레코드를 조회하는데 걸린 시간(중첩이 발생하거나, 타 로직이 포함될 수도 있음)|
|**HttpcCount**|외부 Http Call 건수|
|**HttpcTime**|외부 Http Call 시간|
|**ClientOs**|클라이언트 OS|
|**ClientOsPro**|클라이언트 OS 회사|
|**ClientType**|클라이언트 타입 (예 브라우저)|
|**ClientName**|클라이언트 브라우저 이름|
|**UserAgent**|웹 클라이언트 정보, 이것을 파싱하여 ClientOs, ClientOsPro 등의 정보를 추출함|
|**MTID**|멀티 서버 트랜잭션 아이디|
|**Depth**|멀티 서버 트랜잭션이 몇 번째 티어인지 표시|
|**Caller TID**|나를 호출한 트랜잭션의 Tid|

<!-- 연관 트랜잭션_멀티 서버 트랜잭션 연계 추적은 고급 기능 쳅터에서 별도 설명되어 있습니다. -->
<!-- ⓵ ⓶ #SQL 파라미터 조회 옵션-->

:::info
1. ***Show Stats***를 클릭하면 해당 URL의 통계 데이터를 조회할 수 있습니다
1. ***MTID***를 클릭하면 연관 트랜잭션을 추가 조회 분석할 수 있습니다. 
1. 에이전트 애플리케이션 타입이나 설정에 따라 표시되지 않는 항목이 있을 수 있습니다. 에이전트 매뉴얼을 참고 바랍니다.
:::


### 트랜잭션 파라미터 조회

1. SQL 변수와 HTTP 쿼리를 조회하기 위해 에이전트 설정을 추가하세요.

    ```java title='whatap.conf' {1,3}
    profile_sql_param_enabled=true 
    // SQL 파라미터 조회 옵션: 옵션이 적용되면 SQL 파라미터를 암호화하여 수집합니다.
    profile_http_parameter_enabled=true 
    // HTTP 파라미터 조회 옵션: 옵션이 적용되면 HTTP 쿼리 파라미터를 암호화하여 수집합니다.
    ```

1. 설정 적용 후 ***프로파일 스텝*** 내 ***SQL*** 문을 클릭하면 파라미터를 조회할 수 있습니다.

    ![profile-sql](https://img.whatap.io/media/images/Screenshot_2020-12-15_W_JAVA_DEMO_5490_-_Application_Monitoring18.png)

1. 파라미터 조회에 필요한 키는 에이전트가 설치된 서버 경로 *$WHATAP_HOME/paramkey.txt* 파일 내 6자리 문자열입니다. 다른 문자열로 변경 가능합니다.

    ```java title='paramkey.txt'
    whatap@vmwas01:/apps/whatap$ cat paramkey.txt
    A1B2C3
    ```

    :::tip
    paramkey.txt 내 키는 SQL 변수 조회, HTTP 쿼리 조회, Thread 중지에 필요합니다.
    :::