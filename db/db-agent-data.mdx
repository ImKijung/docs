---
id: db-agent-data
title: 에이전트 데이터 수집
description: 데이터베이스 서버의 정보를 수집하는 설정에 대한 설명입니다.
tags: [ 데이터베이스, 데이터베이스 모니터링, 에이전트 ]
---

데이터베이스 서버의 정보를 수집하는 설정에 대한 설명입니다.

* **multi_db_stat** <span class='type'>Int</span><br/>기본값 `1`<br/>
multi db의 stat 정보 수집 처리 유무를 설정합니다. oracle(pluggable db인 경우)과 postgresql에서만 유효합니다. db instance 내의 각 db 별로 stat 수집 여부를 설정하며 수집 부하를 줄이기 위해 `0`으로 설정할 수 있습니다.

* **long_run_session_sec** <span class='type'>Second</span><br/>기본값 `10`<br/>
설정한 시간보다 길게 수행되고 있는 세션을 long run 세션으로 처리합니다. (단위: 초)

* **deadlock_interval** <span class='type'>Int</span><br/>기본값 `1`<br/>
mysql에서 deadlock 정보를 가져오는 간격을 설정합니다. (단위: 분) deadlock 정보는 설정 간격 동안 발생했던 가장 마지막의 deadlock 정보만을 가져옵니다.

* **tables_hour** <span class='type'>Int</span><br/>기본값 `5`<br/>
테이블 정보를 저장하기 위해 정보를 수집하는 시각을 설정합니다. 기본값으로 `5`이며 새벽 5시에 수집을 시작합니다.

* **tables_min_row** <span class='type'>Int</span><br/>기본값 `10000`<br/>
테이블 정보를 수집할 때 설정한 값보다 작은 row 수를 가진 테이블 정보는 수집하지 않습니다.

* **tables_exclude_sys** <span class='type'>Boolean</span><br/>기본값 `false`<br/>
테이블 정보를 수집할 때 sys 소유인 테이블 정보의 수집 유무를 설정합니다. `true`로 설정하면 sys 소유의 테이블 정보는 수집하지 않습니다.

* **stat** <span class='type'>String</span><br/>
oracle 모니터링 정보중, 수집 처리할 stat 지표들을 콤마로 구분하여 설정합니다. 다음 기본값을 사용합니다.

  ```ini title='whatap.conf'
  stat=logons current,user commits,session logical reads,CPU used by this session,DB time,enqueue waits,physical reads,physical writes,execute count,db block changes,opened cursors current,parse count (total),parse count (hard),sorts (memory)
  ```

* **event** <span class='type'>String</span><br/>
oracle 모니터링 정보 중 수집 처리할 event 지표들을 쉼표(,)로 구분하여 설정합니다. 다음 기본값을 사용합니다.\

  ```ini title='whatap.conf'
  event=db file sequential read,db file scattered read,enq: TX - row lock contention
  ```

* **exclude_background** <span class='type'>String</span><br/>기본값 `3`<br/>
oracle 모니터링 정보 중 세션 개수 및 세션 리스트를 수집할 때 background 세션의 제외 유무를 설정합니다.
  * `0`: 제외하지 않음
  * `1`: 세션 리스트 수집 시 background 세션 제외
  * `2`: 세션 개수 처리 시 background 세션 제외
  * `3`: 세션 리스트와 개수 처리 시 background 세션 제외

* **my_opt** <span class='type'>Int</span><br/>기본값 `0`<br/>
mysql의 data 디렉토리 권한에 따라 `performance_schema`가 존재 및 사용 가능 상태임에도 불구하고 사용하지 못할 경우가 있으며, 이때에는 dbx 에이전트가 정상 동작하지 않습니다. `performance_schema`를 사용하지 않도록 하려면 `1`을 설정합니다.