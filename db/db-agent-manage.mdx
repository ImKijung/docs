---
id: db-agent-manage
title: 관리하기
description: whatap.conf 파일을 통해 데이터베이스 에이전트를 관리할 수 있습니다.
tags: [ 데이터베이스, 데이터베이스 모니터링 ]
---

데이터베이스 에이전트 서버에 있는 *whatap.conf* 파일을 통해 설정할 수 있는 추가 옵션에 대해 알아봅니다.

## 프로세스 모니터링{#xos}

Postgresql, Oracle에서는 데이터베이스 프로세스 모니터링을 할 수 있습니다. 데이터베이스 서버의 프로세스 사용량을 모니터링하려면 데이터베이스 서버에 별도의 XOS 에이전트 프로세스를 띄워 데이터를 수집할 수 있습니다. 진행 중인 세션의 cpu usage 값을 함께 확인할 수 있습니다.

1. 에이전트 서버에 있는 *whatap.conf* 파일에 다음 옵션을 설정하세요.

  ```ini title='whatap.conf'
  xos=[DBX_DB_SERVER_IP]
  xos_port=[DBX_PORT] (default: 3002)
  ```

  :::note
  DB 서버의 IP 주소를 특정할 수 없다면 `xos=1`로 설정합니다. 
  :::

1. xos 경로를 데이터베이스 서버로 옮기세요. *압축을 해제한 폴더/whatap/xos/*

1. 데이터베이스 서버에 있는 *xos.conf* 파일에 에이전트 서버 정보를 입력하세요.

  ```ini title='xos.conf'
  dbx_ip=[DBX_AGENT_SERVER_IP]
  dbx_port=[DBX_PORT] (default: 3002)
  cpu_limit=0
  mem_limit=10240
  ```

1. 데이터베이스 서버에서 다음 프로세스를 실행하세요.

  ```bash title='start.sh'
  $ ./start.sh
  ```

  ```bash title='백그라운드로 실행할 경우'
  $ ./startd.sh
  ```

## 서버 이름을 임의로 부여해 관리하기{#custom-server-name}

에이전트는 데이터베이스 서버 종류와 데이터베이스 서버의 IP 주소, 서비스 포트를 사용해 자동으로 인스턴스명을 부여합니다.

### 데이터베이스 인스턴스명 설정 옵션

기본 패턴에 대한 변경은 *whatap.conf* 파일에서 설정할 수 있습니다.

```ini title='whatap.conf'
## 기본값
object_name={type}-{ip2}-{ip3}-{port}
```

### 데이터베이스 인스턴스명 패턴

한 프로젝트 내에서는 동일한 데이터베이스 인스턴스명을 사용할 수 없습니다. Internal ip address로 인해 서버 IP 주소가 중복되면 데이터베이스 서버명을 그룹 단위로 패턴화하여 적용할 수 있습니다.

| 설정     | 설명                                                                      |
| -------- | ------------------------------------------------------------------------- |
| {type}     | DBX                                                                       |
| {ip0}    | IPv4 주소 중 첫 번째 단위를 사용합니다. (예시, **10**.11.12.13 중 **10**) |
| {ip1}    | IPv4 주소 중 두 번째 단위를 사용합니다. (예시, 10.**11**.12.13 중 **11**) |
| {ip2}    | IPv4 주소 중 세 번째 단위를 사용합니다. (예시, 10.11.**12**.13 중 **12**) |
| {ip3}    | IPv4 주소 중 네 번째 단위를 사용합니다. (예시, 10.11.12.**13** 중 **13**) |
| {port}     | 데이터베이스 포트                                                         |
| {hostname} | 호스트 명                                                                 |

:::note
에이전트 이름 설정과 관련한 whatap.conf 파일의 설정은 [다음 설명서](db-agent-naming)를 참조하세요.
:::

## AES 256 암호화 적용

와탭 DBX 에이전트는 수집된 데이터를 암호화하여 서버로 전송합니다. 데이터의 중요도나 설정에 따라 이를 변경할 수 있습니다. 기본적으로 XOR 연산과 AES 알고리즘을 통한 암호화를 사용하며 평문을 128비트 단위로 나누어 암호화, 복호화를 수행합니다. 사용자 설정에 따라 256비트까지 확장할 수 있습니다.

와탭 DBX 에이전트를 설치한 경로에서 *whatap.conf* 파일에 다음과 같이 옵션을 추가하세요.

```ini title='whatap.conf' {3} showLineNumbers
license=[프로젝트 액세스 키]
whatap.server.host=52.78.209.94/52.78.224.235
cypher_level=256
```

설정을 추가한 다음 에이전트를 다시 시작하세요.
