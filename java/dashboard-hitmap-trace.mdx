---
id: dashboard-hitmap-trace
title: 히트맵 - 트레이스 분석
description: 히트맵 위젯을 통해 트레이스 분석 창을 열어 트랜잭션 목록과 각 트랜잭션 하위의 스텝 정보를 한 번에 확인할 수 있습니다.
tags: [ Java, 애플리케이션, 히트맵, 트레이스 ]
---

***애플리케이션 대시보드***의 ***히트맵*** 위젯을 통해 ***트레이스 분석*** 창을 열어 트랜잭션 목록과 각 트랜잭션 하위의 스텝 정보를 한 번에 확인할 수 있습니다. 히트맵 위젯에서 원하는 영역을 드래그하세요. 선택한 영역의 트랜잭션 목록과 하위 스텝 정보를 포함하는 ***트레이스 분석*** 창이 나타납니다.

:::tip

에러가 발생한 트랜잭션 정보만 분류해 확인하려면 ***애플리케이션 대시보드***의 ***히트맵*** 위젯의 오른쪽 위에 ***에러*** 버튼을 선택한 다음 차트 영역을 드래그하세요.

![히트맵 위젯](/img/apm-hitmap-error.png)

:::

## 기본 화면 안내

![트레이스 분석](/img/analysis-tx-main.png)

* ![숫자 1](/img/number-01.png) **트랜잭션 조회 건수**: 히트맵 위젯에서 드래그한 영역의 트랜잭션 목록의 개수를 확인할 수 있습니다. 최대 1000건까지 조회할 수 있습니다.

* ![숫자 2](/img/number-02.png) **트랜잭션 분류**: ![액티브 스택 아이콘](/img/ic-s-active-stack.svg) ***액티브 스택***과 ![멀티 트랜잭션 아이콘](/img/ic-s-mult-transation.svg) ***멀티 트랜잭션***을 구분하여 목록을 확인할 수 있습니다.

* ![숫자 3](/img/number-03.png) **트랜잭션 검색**: 트랜잭션 명과 에이전트 명, 에러 메시지를 기준으로 트랜잭션 목록을 검색할 수 있습니다.

* ![숫자 4](/img/number-04.png) **목록 정렬하기**: 테이블의 헤더 컬럼 항목을 클릭하면 선택한 항목을 기준으로 트랜잭션 목록을 정렬할 수 있습니다.

* 에러가 발생한 트랜잭션 항목은 목록에서 빨간색으로 표시됩니다.

  ![트랜잭션 목록](/img/analysis-tx-main-error.png)

:::tip

***히트맵*** 위젯에서 다른 영역을 드래그하면 새로운 트레이스 분석 창을 불러올 수 있습니다. 기존에 열려진 트레이스 분석 창과 비교해 확인할 수 있습니다.

:::


## 트레이스 분석하기

트랜잭션 목록에서 상세 내용을 확인할 항목을 선택하세요. 화면 오른쪽에 선택한 트랜잭션에 대한 상세 분석 내용을 표시합니다. 이 상태에서 다른 트랜잭션 항목을 선택하면 선택한 트랜잭션 항목에 대한 상세 분석 내용으로 변경됩니다.

와탭은 트랜잭션의 성능을 분석하기 위해 이름과 클라이언트 정보 등의 속성, 트랜잭션의 처리 성능 그리고 각 구간별 상세 수행 이력을 수집하고 보여줍니다.

![트레이스 분석](/img/analysis-tx-table-view.png)

* ![숫자 5](/img/number-05.png) 영역에서는 스텝 정보를 다양한 형식으로 확인할 수 있습니다. 원하는 형식의 탭을 선택하세요.

* ![숫자 6](/img/number-06.png) 영역에서는 트랜잭션에 대한 기본 정보를 확인할 수 있습니다. 왼쪽 목록의 컬럼 항목과 일치하는 정보입니다.

* ![숫자 7](/img/number-07.png) ![통계 아이콘](/img/ic-static.svg): 해당 URL 또는 각 수행 구간의 통계 데이터 창이 나타납니다. 통계 데이터 창에서 ***상세 >*** 버튼을 선택하면 ***통계/보고서*** > ***통계*** 메뉴로 이동합니다.

  :::note

  ***통계*** 메뉴에 대한 자세한 내용은 [다음 문서](analysis-apm-trs)를 참조하세요.

  :::

* ![숫자 8](/img/number-08.png) <LinkImage img='hitmap-lr-drag.svg' alt='좌우 드래그 아이콘' className='_drag' /> 왼쪽 또는 오른쪽으로 드래그해서 화면의 크기를 조절할 수 있습니다. 더 많은 정보를 보길 원할 때 이용하면 유용합니다.

  :::note

  <LinkImage img='ic-s-tx-left.svg' alt='왼쪽 화살표 아이콘' className='_txDrag' /> 또는 <LinkImage img='ic-s-tx-right.svg' alt='오른쪽 화살표 아이콘' className='_txDrag' /> 버튼을 클릭하면 트랜잭션 목록 또는 상세 분석 화면을 전체 크기로 변경할 수 있습니다.

  :::

수집하는 **스텝(Step)**의 종류는 다음과 같습니다. 다이어그램과 텍스트 색상을 구분해 표시합니다.

* ***DB Connection*** 스텝 <span class='type'>START-END</span>

  RDB에 대한 연결에 대한 성능을 포함합니다. 스텝 정보에는 이름, 응답시간, 에러를 포함합니다.

* ***SQL*** 스텝 <span class='type'>START-END</span>

  JDBC SQL에 대한 성능을 포함합니다. 스텝 정보에는 연결 정보, SQL문, 에러가 포함되어 있습니다.

* ***HTTP Call*** 스텝 <span class='type'>START-END</span>

  외부 http 서비스 호출에 대한 성능을 포함합니다. 스텝 정보에는 url, host, port, 응답시간, 에러가 포함됩니다.

* ***Message*** 스텝 <span class='type'>ADD</span>

  트레이스를 수집하는 과정에서 비정형적인 모든 구간에 대한 이력을 수집할 때 메시지 스텝을 사용합니다.  

* ***Socket*** 스텝 <span class='type'>ADD</span>

  Socket 오픈을 표현하는 스텝입니다.

* ***Method*** 스텝 <span class='type'>START-END</span>

  메소드 응답시간을 추적합니다.

* ***Active Stack*** 스텝 <span class='type'>START-END</span>

  액티브 스텝에 대한 정보를 포함합니다. 별도 스레드가 생성하여 트레이스에 추가하는 방식으로 수집합니다.

:::note

와탭 모니터링 서비스에서 **스텝(Step)**은 **스팬(Span)**과 같은 뜻으로 사용됩니다. **스팬(Span)**에는 특정 코드 경로의 실행에 대한 정보가 포함됩니다. 스팬은 활동의 시작부터 끝까지를 측정하며 다른 스팬과 상/하위 관계를 가질 수 있습니다.

:::


### 테이블 뷰

***테이블 뷰*** 탭에서는 트랜잭션의 수행 과정을 시간의 순서대로 확인할 수 있습니다.

![테이블 뷰](/img/analysis-tx-table-view-mode.png)

* 트랜잭션을 수행 구간별로 분류해 다이어그램을 통해 확인할 수 있습니다. 전체 경과 시간 중 각 구간별 소요된 시간, 가장 오래 소요된 구간을 빠르게 파악할 수 있습니다.

* 다이어그램의 각 구간을 선택하면 해당 스텝이 위치한 테이블 목록으로 이동합니다.

  ![스텝 선택](/img/analysis-tx-table-view-select-stack.png)

* 빨간색 원(![액티브 스택 아이콘](/img/ic-c-tx-active-stack.svg))이 위치한 영역은 액티브 스택이 수집된 순간입니다. 빨간색 원을 선택하면 ***액티브 스택*** 버튼이 위치한 테이블 목록으로 이동할 수 있습니다. ***액티브 스택*** 버튼을 선택하면 해당 구간 동안 수행된 스텝 정보를 확인할 수 있습니다.

  :::note

  * 트랜잭션 목록에서 ![액티브 스택 아이콘](/img/ic-s-active-stack.svg) 아이콘이 표시된 항목에서 확인할 수 있습니다.

  * 액티브 스택에 대한 자세한 내용은 [다음 문서](analysis-apm#active-stack)를 참조하세요.

  :::

* ![컬럼 아이콘](/img/ico-column.svg) ***컬럼 선택***: 테이블 목록에 컬럼으로 메모리 누적 정보 및 CPU 누적 정보를 추가하거나 감출 수 있습니다.

* ![다운로드 아이콘](/img/ico-download.svg) ***TXT***: 트랜잭션 기본 정보 및 구간별 수행 정보를 txt 형식의 파일로 다운로드할 수 있습니다.

* ![다운로드 아이콘](/img/ico-download.svg) ***SQL***: 트랜잭션 기본 정보 및 SQL 수행 정보를 txt 형식의 파일로 다운로드할 수 있습니다.

* ![확대 아이콘](/img/ic-outside.svg): 트랜잭션 요약 정보와 다이어그램을 감추고 테이블 목록만 확인할 수 있습니다. ![축소 아이콘](/img/ic-inside.svg) 버튼을 선택하면 감춰진 정보를 다시 표시합니다. 테이블 목록이 긴 경우 이 기능을 이용하면 유용합니다.

<details>
<summary>컬럼 정보 안내</summary>

* ***No***: 스텝의 발생 순서

* ***시간***: 각 스텝의 시작 시각

* ***갭***: 해당 스텝의 시작 시각부터 다음 스텝으로 넘어가기까지 대기 시간, 외부 요인으로 지연될 경우 경과 시간과 차이가 있을 수 있습니다.

* ***경과***: 각 메소드 시작부터 종료까지 총 소요 시간

* ***내용***: 해당 스텝의 세부 수행 내용

</details>


### 레코드 요약

![레코드 요약](/img/analysis-tx-record-summary.png)

트랜잭션의 기본 정보를 확인하려면 ***레코드 요약*** 탭을 선택하세요. 트랜잭션의 기본 정보 및 해당 트랜잭션이 수행된 에이전트 관련 정보, 메모리 할당 사용량, 클라이언트 관련 정보를 확인할 수 있습니다.


### 트리뷰

트랜잭션 수행 과정을 트리 형식으로 확인하려면 ***트리뷰*** 탭을 선택하세요. 각 트랜잭션과 그에 속한 트레이스의 세부 정보, 트레이스의 시작 시간 및 소요 시간, 호출 관계를 확인할 수 있습니다. 다이어그램의 각 구간을 선택하면 해당 스텝이 위치한 트리뷰로 이동합니다.

![트리뷰](/img/analysis-tx-tree-view.png)

* ***한 줄 보기***: 각 구간 별 수행 정보에 표시된 텍스트를 한 줄로 표시해 트리 형식을 간격하게 정리할 수 있습니다.

* ***여러 줄 보기***: 각 구간 별 수행 정보에 표시된 텍스트를 줄바꿈해 모두 표시합니다.

* ***최장 경로***: 가장 긴 경로로 이동할 수 있습니다.

* ![차트 아이콘](/img/ic-bar-chart.svg) ***Display Time Bar***: 경과 시간을 막대 형식의 차트로 표시합니다.

* ![시간 아이콘](/img/ic-custom-time.svg) ***Display Time***: 각 구간별 타임 스탬프, 갭, 경과 시간을 텍스트 형식으로 표시합니다.

* ![감추기 아이콘](/img/ic-eye-invisible.svg) ***Hide Time***: 시간 정보를 감춥니다.

* ![확대 아이콘](/img/ic-outside.svg): 트랜잭션 요약 정보와 다이어그램을 감추고 트리뷰만 확인할 수 있습니다. ![축소 아이콘](/img/ic-inside.svg) 버튼을 선택하면 감춰진 정보를 다시 표시합니다. 트리뷰 목록이 긴 경우 이 기능을 이용하면 유용합니다.


### 액티브 스택

![액티브 스택](/img/analysis-tx-active-stack.png)

액티브 스택을 수집한 구간과 시간, 관련한 클래스, 메소드 정보를 확인하려면 ***액티브 스택*** 탭을 선택하세요. 

:::note

* 트랜잭션 목록에서 ![액티브 스택 아이콘](/img/ic-s-active-stack.svg) 아이콘이 표시된 항목에서 확인할 수 있습니다.

* 액티브 스택에 대한 자세한 내용은 [다음 문서](analysis-apm#active-stack)를 참조하세요.

:::


### 멀티 트랜잭션

멀티 트랜잭션은 다른 에이전트나 프로젝트와의 연관된 트랜잭션을 의미합니다. ***멀티 트랜잭션*** 탭에서는 와탭 모니터링 서비스에 등록한 애플리케이션 간의 호출 관계를 확인할 수 있습니다.

:::tip

멀티 트랜잭션을 추적하려면 ***관리*** > ***에이전트 설정*** 메뉴에서 `mtrace_enabled` 옵션을 `true`로 설정하세요. 에이전트 설정에 대한 자세한 내용은 [다음 문서](set-agent#set-agent-service)를 참조하세요.

:::

![멀티 트랜잭션](/img/analysis-tx-multi.png)

* ***차트***: 각 트랜잭션의 호출 관계를 플로우 차트 형식으로 제공합니다. 트랜잭션 노드를 선택하면 해당 트랜잭션 노드에 대한 트레이스 분석 정보를 확인할 수 있습니다. ***차트*** 모드에서는 마우스를 이용해 원하는 위치로 이동하거나 스크롤을 통해서 확대, 축소할 수 있습니다.

  * ![필터 아이콘](/img/ico-filter.svg) ***프로젝트 선택***: 차트에 표시될 프로젝트를 선택하거나 해제할 수 있습니다.

  * ![설정 아이콘](/img/ico-setting.svg) ***차트 뷰 설정***: 차트에 표시할 요소를 선택하거나 해제할 수 있습니다.

* ***테이블***: 테이블 형식으로 멀티 트랜잭션 내에 포함된 각 트랜잭션 별 정보를 확인할 수 있습니다. ![컬럼 아이콘](/img/ico-column.svg) 컬럼 선택 아이콘을 선택해 테이블 헤더 컬럼을 편집할 수 있습니다. 각 트랜잭션 항목을 선택하면 트레이스 분석 정보를 확인할 수 있습니다.

* ***트리***: 트리 형식으로 트랜잭션 간의 호출 관계를 파악할 수 있습니다. 관련한 부가 기능은 ***트리뷰*** 탭의 기능과 같습니다.

:::note

* 트랜잭션 목록에서 ![멀티 트랜잭션 아이콘](/img/ic-s-mult-transation.svg) 아이콘이 표시된 항목에서 확인할 수 있습니다.

* 멀티 트랜잭션에 대한 자세한 내용은 [다음 문서](trs-multi-trace)를 참조하세요.

:::

### 메소드 요약

![메소드 요약](/img/analysis-tx-method-summary.png)

메소드 정보만을 확인하려면 ***메소드 요약*** 탭을 선택하세요. 에이전트에 추적이 설정된 메소드 이름과 소요 시간을 표시합니다. 불필요한 로직이 반복 실행되는 경우, 낮은 건수에 비해 실행 시간이 오래 걸리는 경우를 파악해 메소드 로직 개선을 위한 분석 정보로 활용할 수 있습니다.

:::note

메소드(method)와 관련한 에이전트 설정 옵션에 대한 자세한 내용은 [다음 문서](agent-transaction)를 참조하세요. 이용 중인 상품에 따라 메소드 추적 지원 여부는 다를 수 있습니다.

:::


### SQL 요약

![SQL 요약](/img/analysis-tx-sql-summary.png)

SQL문에 대한 정보를 확인하려면 ***SQL 요약*** 탭을 선택하세요. 불필요하게 반복 실행되는 경우, 낮은 건수에 비해 실행 시간이 오래 걸리는 경우를 파악해 쿼리 성능 개선을 위한 분석 정보로 활용할 수 있습니다.


### HTTP Call 요약

![HTTP Call 요약](/img/analysis-tx-http-call.png)

HTTP 호출의 호출 건수, 합계 시간, 평균 시간 등을 확인하려면 ***HTTP Call 요약*** 탭을 선택하세요. 불필요한 외부 호출이 반복 실행되는 경우, 낮은 건수에 비해 실행 시간이 오래 걸리는 경우를 파악해 트랜잭션 지연 요인이 외부인지 내부인지를 파악하는 분석 정보로 활용할 수 있습니다.


### 트랜잭션 로그

트랜잭션과 관련한 로그 정보를 확인하려면 ***트랜잭션 로그*** 탭을 선택하세요.

![트랜잭션 로그](/img/analysis-tx-transaction-log.png)

* **키워드 검색**: 키워드 검색란에 검색하려는 텍스트를 입력한 다음 엔터 키를 입력하거나 ![검색 아이콘](/img/ico-search.svg) 버튼을 선택하세요. 입력한 텍스트와 일치하는 키워드를 하이라이트 표시합니다.

* ![하이라이트 아이콘](/img/ic-highlight.svg) ***키워드 하이라이트***: 키워드와 색상을 설정하면 자동으로 로그 목록에서 키워드와 일치하는 텍스트를 하이라이트 표시합니다.

* ![설정 아이콘](/img/ico-setting.svg) ***테이블 설정***: 로그 목록 테이블의 헤더 컬럼을 설정할 수 있습니다.

:::note

* ***트랜잭션 로그*** 탭을 활성화하려면 로그와 관련한 에이전트 설정 옵션을 적용해야 합니다. 로그 설정에 대한 자세한 내용은 [다음 문서](../log/log-function)를 참조하세요.

* ***트랜잭션 로그*** 탭은 **로그 조회** 권한이 가진 멤버만 진입할 수 있습니다. 멤버 권한에 대한 자세한 내용은 [다음 문서](../project/project-structure)를 참조하세요.

:::

#### 키워드 하이라이트 설정하기

1. 하이라이트 표시할 키워드를 추가하려면 ![하이라이트 아이콘](/img/ic-highlight.svg) 버튼을 선택하세요.

    ![키워드 하이라이트](/img/analysis-tx-transaction-log-highlight-keyword.png)

1. 원하는 키워드를 입력하세요.

1. 색상 아이콘을 선택한 다음 원하는 색상을 선택하세요.

1. 엔터를 입력하세요.

추가한 키워드가 목록에 생성됩니다.


#### 키워드 하이라이트 삭제하기

하이라이트 목록에서 이용하지 않는 항목을 삭제하려면 ![삭제 아이콘](/img/ic-minus.svg) 버튼을 선택하세요.

#### 테이블 컬럼 표시하거나 숨기기

{@include: ../common-items/_display-or-hide-table-column.mdx}

#### 테이블 컬럼 순서 바꾸기

{@include: ../common-items/_change-order-table-column.mdx}

#### 테이블 콘텐츠 표시 설정

{@include: ../common-items/_set-display-table-contents.mdx}


## 부가 기능

### 테이블 컬럼 설정하기

테이블 헤더 컬럼을 감추거나 원하는 항목을 추가할 수 있습니다. 컬럼 순서를 변경할 수도 있습니다. ![컬럼 아이콘](/img/ico-column.svg) ***컬럼 설정*** 버튼을 선택하세요.

![컬럼 설정](/img/analysis-tx-main-column.png)

:::note

* 설정을 완료한 다음에는 ***확인*** 버튼을 선택해야 설정 사항이 테이블에 반영됩니다.

* ![숫자 3](/img/number-03.png) 검색란에 텍스트를 입력해 원하는 컬럼 항목을 검색할 수 있습니다. 입력한 텍스트와 매칭되는 컬럼 항목만 표시됩니다.

:::

#### 컬럼 추가하기

![숫자 1](/img/number-01.png) 목록에서 테이블 헤더 컬럼으로 추가할 항목을 선택하세요. 모든 항목을 추가하려면 ***전체 선택***을 선택하세요.

#### 컬럼 삭제하기

![숫자 1](/img/number-01.png) 목록에서 삭제할 컬럼 항목의 체크 박스를 선택 해제하세요. 또는 ![숫자 2](/img/number-02.png) 목록에서 삭제할 항목의 오른쪽에 ![삭제 아이콘](/img/ico-remove-white.svg) 버튼을 선택하세요.

#### 컬럼 순서 변경하기

![숫자 2](/img/number-02.png) 목록에 순서를 변경할 항목을 드래그해서 원하는 위치로 이동할 수 있습니다. 

#### 설정 사항 초기화하기

변경 사항은 모두 취소하고 초기화하려면 ![초기화 아이콘](/img/ico-reset.svg) ***초기화*** 버튼을 선택하세요.


### 조회 데이터 다운로드

테이블에 출력된 데이터를 txt 파일 형식으로 다운로드하려면 ![다운로드 아이콘](/img/ico-download.svg) ***TXT*** 버튼을 선택하세요.