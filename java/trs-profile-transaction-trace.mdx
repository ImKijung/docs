---
id: trs-profile-transaction-trace
title: 트랜잭션 트레이싱
description: 트랜잭션 트레이싱을 안내합니다. 
tags: [ 트랜잭션, UI, Java ]
draft: true
---

## 트랜잭션 트레이싱이란? 

트랜잭션 성능이 트랜잭션 시작과 종료 사이의 요약 지표들이나 속성들을 의미한다면 트랜잭션 트레이스는 트랜잭션이 수행되는 과정 중인 스텝들을 추적하는 것입니다. 트랜잭션이 느리거나 오류가 있다면 그 원인을 추적하기 위해서 수행 이력을 스텝별로 추적해야 합니다. 이것을 **트랜잭션 트레이싱**이라고 합니다.

트랜잭션 성능 추적을 위해 수집하는 스텝의 종류는 다음과 같습니다.

* **DB 연결 스텝** <span class='type'>START-END</span>

  RDB에 대한 연결에 대한 성능을 포함합니다. 스텝 정보에는 이름, 응답시간, 에러를 포함합니다.

* **SQL 스텝** <span class='type'>START-END</span>

  JDBC SQL에 대한 성능을 포함합니다. 스텝 정보에는 연결 정보, SQL문, 에러가 포함되어 있습니다.

* **HTTP Call 스텝** <span class='type'>START-END</span>

  외부 http 서비스 호출에 대한 성능을 포함합니다. 스텝 정보에는 url, host, port, 응답시간, 에러가 포함됩니다.

* **Message 스텝** <span class='type'>ADD</span>

  트레이스를 수집하는 과정에서 비정형적인 모든 구간에 대한 이력을 수집할 때 메시지 스텝을 사용합니다.  

* **SOCKET 스텝** <span class='type'>ADD</span>

  Socket 오픈을 표현하는 스텝입니다.

* **METHOD 스텝** <span class='type'>START-END</span>

  메소드 응답시간을 추적합니다.

* **ACTIVE STACK 스텝** <span class='type'>START-END</span>

  액티브 스택에 대한 정보를 포함합니다. 별도 스레드가 생성하여 트레이스에 추가하는 방식으로 수집합니다.

:::note

와탭 모니터링 서비스에서 **스텝(Step)**은 **스팬(Span)**과 같은 뜻으로 사용됩니다.

:::

## 상세 분석

홈 화면 > 프로젝트 선택 > ***분석*** > ***히트맵***

<ImgLang img='tx-hitmap.png' desc='히트맵' />

1. ![숫자 1](/img/number-01.png) ***시간 선택***에서 히트맵을 조회할 기간을 선택하세요.

1. ![숫자 1](/img/number-01.png) ***구분***, ***애플리케이션***에서 조회 대상을 선택하세요.

1. ![검색 아이콘](/img/ico-btn-search.png) 버튼을 선택하세요.

1. ![숫자 2](/img/number-02.png) ***히트맵 트랜잭션***에서 원하는 영역을 ![숫자 3](/img/number-03.png)과 같이 드래그하세요.

1. ![숫자 5](/img/number-05.png) ***TX 트레이스***에 목록이 나타나면 분석하기 원하는 트랜잭션 항목을 선택하세요.

트랜잭션의 성능 분석을 위한 클라이언트 정보 등의 속성, 트랜잭션의 처리 성능, 각 구간별 상세 수행 이력 등을 확인할 수 있는 ***트랜잭션 정보*** 창이 나타납니다.

:::note

* ***히트맵*** 메뉴의 기능에 대한 자세한 내용은 [다음 문서](trs-view#details)를 참조하세요.

* 애플리케이션 대시보드의 히트맵 위젯에 대한 자세한 내용은 [다음 문서](dashboard-hitmap-trace)를 참조하세요.

:::

<!--### 테이블 뷰-->
{@include: ../common-items/_dashboard-hitmap-trace-table-view.mdx} 

<!--### 레코드 요약-->
{@include: ../common-items/_dashboard-hitmap-trace-record-summary.mdx} 

#### 트랜잭션 속성 및 성능

| 분류 | 속성 | 설명 |
| -- | -- | -- |
| 에이전트 | **에이전트 명(oname)** | 에이전트 오브젝트 이름 |
| ^ | 에이전트 ID (oid) | 에이전트 오브젝트 아이디 |
| ^ | 에이전트 그룹 명 | `okind` 옵션으로 설정된 에이전트 그룹 이름 |
| ^ | 에이전트 그룹 ID | 에이전트 그룹 아이디 |
| ^ | 에이전트 서버 명 | `ondoe` 옵션으로 설정한 에이전트 서버 이름 |
| ^ | 에이전트 서버 ID | 에이전트 서버 아이디 |
| ^ | 프로젝트 코드 | 와탭 모니터링 서비스에 등록한 프로젝트의 식별 코드 |
| 트랜잭션 | **트랜잭션 ID** | 트랜잭션 아이디 |
| ^ | 시작 시간 | 트랜잭션 시작 시각 |
| ^ | 종료 시간 | 트랜잭션 종료 시각 |
| ^ | **경과 시간** | 트랜잭션 수행 시간 |
| ^ | HTTP 메소드 | HTTP 메소드 - GET, POST, PUT, HEAD 등 |
| ^ | HTTP 호출 시간 | 외부 Http Call 시간 |
| ^ | HTTP 호출 건수 | 외부 HTTP Call 건수 |
| ^ | DB 접속 시간 | DB와 연결된 시간 |
| ^ | SQL 시간 | SQL 수행 시간 |
| ^ | SQL 건수 | SQL 수행 건수 |
| ^ | SQL 패치 시간 | 레코드를 조회하는 데 걸린 시간<br/>(중첩이 발생하거나 타 로직이 포함될 수 있음) |
| ^ | SQL 패치 건수 | SQL에서 데이터를 조회한 레코드 건수 |
| 메모리 | 메모리 할당 사용량 | 트랜잭션이 사용한 메모리 사용량 |
| 클라이언트 | 클라이언트 IP | 클라이언트의 IP 주소 |
| ^ | 도메인 | 클라이언트가 접속한 주소 |
| ^ | WClientID | 클라이언트의 ID |
| ^ | 국가 | 클라이언트의 국가 정보 |
| ^ | 운영체제 | 클라이언트의 운영체제 이름 |
| ^ | 클라이언트 타입 | 클라이언트가 이용한 브라우저 이름 |
| ^ | 클라이언트 명 | |
